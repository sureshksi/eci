server.port=8080
spring.application.name=API-GATEWAY-SERVICE

# -------------------------
# Global CORS Configuration
# -------------------------
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedOrigins=*
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedMethods=*
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedHeaders=*
## Below properties only for Authentication enable ##
#spring.cloud.gateway.globalcors.corsConfigurations.[/**].exposedHeaders=Authorization
#spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowCredentials=true

# -------------------------
# Product Service
# -------------------------
spring.cloud.gateway.routes[0].id=PRODUCT-SERVICE
spring.cloud.gateway.routes[0].uri=http://product-service:8082
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/v1/products/**

# Product Service OpenAPI
spring.cloud.gateway.routes[1].id=PRODUCT-SERVICE-OPENAPI
spring.cloud.gateway.routes[1].uri=http://product-service:8082
spring.cloud.gateway.routes[1].predicates[0]=Path=/v3/products/api-docs

# -------------------------
# Order Service
# -------------------------
spring.cloud.gateway.routes[2].id=ORDER-SERVICE
spring.cloud.gateway.routes[2].uri=http://order-service:8083
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/v1/orders/**

# Order Service OpenAPI
spring.cloud.gateway.routes[3].id=ORDER-SERVICE-OPENAPI
spring.cloud.gateway.routes[3].uri=http://order-service:8083
spring.cloud.gateway.routes[3].predicates[0]=Path=/v3/orders/api-docs

# -------------------------
# Inventory Service
# -------------------------
spring.cloud.gateway.routes[4].id=INVENTORY-SERVICE
spring.cloud.gateway.routes[4].uri=http://inventory-service:8084
spring.cloud.gateway.routes[4].predicates[0]=Path=/api/v1/inventory/**

# Inventory Service OpenAPI
spring.cloud.gateway.routes[5].id=INVENTORY-SERVICE-OPENAPI
spring.cloud.gateway.routes[5].uri=http://inventory-service:8084
spring.cloud.gateway.routes[5].predicates[0]=Path=/v3/inventory/api-docs

# -------------------------
# Notification Service
# -------------------------
spring.cloud.gateway.routes[6].id=NOTIFICATION-SERVICE
spring.cloud.gateway.routes[6].uri=http://notification-service:8085
spring.cloud.gateway.routes[6].predicates[0]=Path=/api/v1/notification/**

# Notification Service OpenAPI
spring.cloud.gateway.routes[7].id=NOTIFICATION-SERVICE-OPENAPI
spring.cloud.gateway.routes[7].uri=http://notification-service:8085
spring.cloud.gateway.routes[7].predicates[0]=Path=/v3/notification/api-docs

# -------------------------
# Customer Service
# -------------------------
spring.cloud.gateway.routes[8].id=CUSTOMER-SERVICE
spring.cloud.gateway.routes[8].uri=http://customer-service:8081
spring.cloud.gateway.routes[8].predicates[0]=Path=/api/v1/customers/**

# Customer Service OpenAPI
spring.cloud.gateway.routes[9].id=CUSTOMER-SERVICE-OPENAPI
spring.cloud.gateway.routes[9].uri=http://customer-service:8081
spring.cloud.gateway.routes[9].predicates[0]=Path=/v3/customers/api-docs

# -------------------------
# Discovery Server Static Resources
# -------------------------
spring.cloud.gateway.routes[10].id=DISCOVERY-SERVER
spring.cloud.gateway.routes[10].uri=http://eureka:password@${app.eureka-server}
spring.cloud.gateway.routes[10].predicates[0]=Path=/eureka/**

# -------------------------
# Prometheus Service
# -------------------------
spring.cloud.gateway.routes[11].id=PROMETHEUS-SERVICE
spring.cloud.gateway.routes[11].uri=http://prometheus:9090
spring.cloud.gateway.routes[11].predicates[0]=Path=/prometheus/**

# -------------------------
# Grafana Service
# -------------------------
spring.cloud.gateway.routes[12].id=GRAFANA-SERVICE
spring.cloud.gateway.routes[12].uri=http://grafana:3000
spring.cloud.gateway.routes[12].predicates[0]=Path=/grafana/**

# -------------------------
# Shipping Service
# -------------------------
spring.cloud.gateway.routes[13].id=SHIPPING-SERVICE
spring.cloud.gateway.routes[13].uri=http://shipment-service:8087
spring.cloud.gateway.routes[13].predicates[0]=Path=/api/v1/shipments/**

# Shipping Service OpenAPI
spring.cloud.gateway.routes[14].id=SHIPPING-SERVICE-OPENAPI
spring.cloud.gateway.routes[14].uri=http://shipment-service:8087
spring.cloud.gateway.routes[14].predicates[0]=Path=/v3/shipments/api-docs

# -------------------------
# Payment Service
# -------------------------
spring.cloud.gateway.routes[15].id=PAYMENT-SERVICE
spring.cloud.gateway.routes[15].uri=http://payment-service:8086
spring.cloud.gateway.routes[15].predicates[0]=Path=/api/v1/payment/**

# Shipping Service OpenAPI
spring.cloud.gateway.routes[16].id=PAYMENT-SERVICE-OPENAPI
spring.cloud.gateway.routes[16].uri=http://payment-service:8086
spring.cloud.gateway.routes[16].predicates[0]=Path=/v3/payment/api-docs

# -------------------------
# Swagger Configuration
# -------------------------
springdoc.swagger-ui.enabled=true
springdoc.api-docs.enabled=true
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.config-url=/v3/api-docs/swagger-config

# -------------------------
# Aggregated Swagger Documentation
# -------------------------
springdoc.swagger-ui.urls[0].name=Product Service
springdoc.swagger-ui.urls[0].url=/v3/products/api-docs

springdoc.swagger-ui.urls[1].name=Order Service
springdoc.swagger-ui.urls[1].url=/v3/orders/api-docs

springdoc.swagger-ui.urls[2].name=Inventory Service
springdoc.swagger-ui.urls[2].url=/v3/inventory/api-docs

springdoc.swagger-ui.urls[3].name=Notification Service
springdoc.swagger-ui.urls[3].url=/v3/notification/api-docs

springdoc.swagger-ui.urls[4].name=Customer Service
springdoc.swagger-ui.urls[4].url=/v3/customers/api-docs

springdoc.swagger-ui.urls[5].name=Shipping Service
springdoc.swagger-ui.urls[5].url=/v3/shipments/api-docs

springdoc.swagger-ui.urls[6].name=Payment Service
springdoc.swagger-ui.urls[6].url=/v3/payment/api-docs
# -------------------------
# Actuator and Eureka Configuration
# -------------------------
management.endpoints.web.exposure.include=health,info,prometheus
management.endpoint.health.show-details=always

app.eureka-server=http://discovery-service:8761
eureka.client.registerWithEureka=false
eureka.client.fetchRegistry=false
eureka.client.serviceUrl.defaultZone=http://eureka:password@localhost:8761/eureka/

#spring.cloud.gateway.routes[1].filters[0]=RewritePath=/v3/products/api-docs(?<segment>.*), /v3/api-docs\${segment}
#spring.cloud.gateway.routes[3].filters[0]=RewritePath=/v3/orders/api-docs(?<segment>.*), /v3/api-docs\${segment}
#spring.cloud.gateway.routes[5].filters[0]=RewritePath=/v3/inventory/api-docs(?<segment>.*), /v3/api-docs\${segment}
#spring.cloud.gateway.routes[7].filters[0]=RewritePath=/v3/notification/api-docs(?<segment>.*), /v3/api-docs\${segment}
#spring.cloud.gateway.routes[9].filters[0]=RewritePath=/v3/customers/api-docs(?<segment>.*), /v3/api-docs\${segment}
